{"version":3,"file":"tabster.js","sources":["../src/tabster.ts"],"sourcesContent":["import { registerDestructor } from '@ember/destroyable';\n\nexport async function setupTabster(\n  /**\n   * A destroyable object.\n   * This is needed so that when the app (or tests) or unmounted or ending,\n   * the tabster instance can be disposed of.\n   */\n  context: object,\n  {\n    tabster,\n    setTabsterRoot,\n  }: {\n    /**\n     * Let this setup function initalize tabster.\n     * https://tabster.io/docs/core\n     *\n     * This should be done only once per application as we don't want\n     * focus managers fighting with each other.\n     *\n     * Defaults to `true`,\n     *\n     * Will fallback to an existing tabster instance automatically if `getTabster` returns a value.\n     *\n     * If `false` is explicitly passed here, you'll also be in charge of teardown.\n     */\n    tabster?: boolean;\n    setTabsterRoot?: boolean;\n  } = {}\n) {\n  const { createTabster, getDeloser, getMover, getTabster, disposeTabster } = await import(\n    'tabster'\n  );\n\n  tabster ??= true;\n  setTabsterRoot ??= true;\n\n  if (!tabster) {\n    return;\n  }\n\n  let existing = getTabster(window);\n  let primitivesTabster = existing ?? createTabster(window);\n\n  getMover(primitivesTabster);\n  getDeloser(primitivesTabster);\n\n  if (setTabsterRoot) {\n    document.body.setAttribute('data-tabster', '{ \"root\": {} }');\n  }\n\n  registerDestructor(context, () => {\n    disposeTabster(primitivesTabster);\n  });\n}\n"],"names":["setupTabster","context","tabster","setTabsterRoot","createTabster","getDeloser","getMover","getTabster","disposeTabster","existing","window","primitivesTabster","document","body","setAttribute","registerDestructor"],"mappings":";;AAEO,eAAeA,YAAYA;AAChC;AACF;AACA;AACA;AACA;AACEC,OAAe,EACf;EACEC,OAAO;AACPC,EAAAA;AAiBF,CAAC,GAAG,EAAE,EACN;EACA,MAAM;IAAEC,aAAa;IAAEC,UAAU;IAAEC,QAAQ;IAAEC,UAAU;AAAEC,IAAAA;AAAe,GAAC,GAAG,MAAM,OAChF,SACF,CAAC;AAEDN,EAAAA,OAAO,KAAK,IAAI;AAChBC,EAAAA,cAAc,KAAK,IAAI;EAEvB,IAAI,CAACD,OAAO,EAAE;AACZ,IAAA;AACF;AAEA,EAAA,IAAIO,QAAQ,GAAGF,UAAU,CAACG,MAAM,CAAC;AACjC,EAAA,IAAIC,iBAAiB,GAAGF,QAAQ,IAAIL,aAAa,CAACM,MAAM,CAAC;EAEzDJ,QAAQ,CAACK,iBAAiB,CAAC;EAC3BN,UAAU,CAACM,iBAAiB,CAAC;AAE7B,EAAA,IAAIR,cAAc,EAAE;IAClBS,QAAQ,CAACC,IAAI,CAACC,YAAY,CAAC,cAAc,EAAE,gBAAgB,CAAC;AAC9D;EAEAC,kBAAkB,CAACd,OAAO,EAAE,MAAM;IAChCO,cAAc,CAACG,iBAAiB,CAAC;AACnC,GAAC,CAAC;AACJ;;;;"}